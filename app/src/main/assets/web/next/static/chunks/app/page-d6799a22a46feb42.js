(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6008:(e,t,r)=>{Promise.resolve().then(r.bind(r,1086))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},1086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),a=r(2115),i=r(7396),l=r(5539),c=r.n(l),n=r(1338),o=r(6046);let d=e=>{let{video:t}=e,[r,l]=(0,a.useState)(null),d=(0,a.useRef)(!1),f=(0,o.useRouter)();if(!d.current&&!r)try{(async()=>{d.current=!0;let e=await n.$.requestThumbnail(t.fileId.toString());e.exists&&l(e.imageData)})()}catch(e){console.error("Failed to fetch thumbnail for id"+t.fileId)}return(0,s.jsx)(i.default,{onClick:function(e){let r="/getfile?fileId=".concat(t.fileId);console.log(r),e.preventDefault(),f.push(r)},href:"/getfile/?fileId=".concat(t.fileId),children:(0,s.jsxs)("div",{className:c().videoCard,children:[r?(0,s.jsx)("img",{height:270,width:150,src:r,alt:"Thumbnail of the video"},"placeholder"+t.fileId):(0,s.jsx)("div",{className:c().placeholderDiv,children:(0,s.jsx)("p",{children:" Thumbnail not created "})}),(0,s.jsx)("h2",{children:t.fileName})]},t.fileId+"div")},"/getfile/?fileId=".concat(t.fileId))};function f(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){try{let e=await n.$.fetchFiles();t(e)}catch(e){i("Failed to fetch files"),console.error("Error fetching files:",e)}})()},[]),(0,s.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-18",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[0===e.length&&!r&&(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."}),r&&(0,s.jsx)("p",{className:"text-red-600",children:r})]}),e.length>0&&(0,s.jsx)("div",{className:"videos-container",children:e.map(e=>(0,s.jsx)(d,{video:e},e.fileId))})]})}},1338:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});let s={async fetchFiles(){try{let e=await fetch("/server/files");if(!e.ok)throw Error("Failed to fetch files");return await e.json()}catch(e){throw Error("Failed to fetch files")}},async sendScreenshot(e,t){let r=JSON.stringify({fileId:e,imageData:t}),s=await fetch("/server/upload-screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:r});if(!s.ok)throw Error("status ".concat(s.status," from server"));return await s.json()},async requestThumbnail(e){let t=await fetch("/server/thumbnail?fileId=".concat(e));if(!t.ok)throw Error("status ".concat(t.status," from server"));return await t.json()}}},5539:e=>{e.exports={videoCard:"VideoCard_videoCard__qolos",placeholderDiv:"VideoCard_placeholderDiv__GFcJX"}}},e=>{var t=t=>e(e.s=t);e.O(0,[24,396,441,517,358],()=>t(6008)),_N_E=e.O()}]);